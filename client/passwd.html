<head>
  <title>passwd</title>
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="span3">
        {{loginButtons align="left"}}
      </div>
    </div>
    {{#if currentUser}}
      {{> usercontent}}
    {{/if}}
  </div>
</body>

<template name="usercontent">
  <div class="row">
    {{> undo}}
  </div>
  <div class="row">
    <div class="span3">
      <input type="text" id="search" class="search-query" placeholder="search" autocomplete="off" />
    </div>
    <div class="span3">
      <!--
      <a class="btn btn-primary" href="/{{userId}}/passwds.csv">CSV</a>
      -->
      <button id="button-csv" class="btn btn-primary">CSV</button>
    </div>
    {{> passphrase}}
  </div>
  <div class="row">
    {{> new}}
  </div>
  <div class="row">
    <div class="span12">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Title</th>
            <th>Username</th>
            <th>Password</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
        {{> passwdlist}}
        </tbody>
      </table>
    </div>
  </div>
</template>

<template name="undo">
  <div class="offset4 span2">
    {{#if undoSet}}
    <button id="button-undo" class="btn btn-link">undo</button>
    {{/if}}
  </div>
</template>

<template name="passphrase">
  <div class="span3 input-append">
    <div class="control-group {{passphraseError}}"><div class="controls">
      {{#if inputPassphrase}}
        <input type="password" id="passphrase" placeholder="passphrase"/>
      {{else}}
        <input type="password" id="passphrase" placeholder="passphrase" disabled="true"/>
      {{/if}}
      {{#if btnSetPassphrase}}
        <button id="button-passphrase-set" class="btn btn-danger" type="button">
      {{else}}
        <button id="button-passphrase-set" class="btn btn-danger" disabled="true" type="button">
      {{/if}}
        <i class="icon-fire"></i>
      </button>
      {{#if btnChangePassphrase}}
      <button id="button-passphrase-change" class="btn btn-primary" type="button">
      {{else}}
      <button id="button-passphrase-change" class="btn btn-primary" disabled="true" type="button">
      {{/if}}
        <i class="icon-pencil"></i>
      </button>
      <button id="button-delete-everything" class="btn" type="button">
        <i class="icon-trash"></i>
      </button>
    </div></div>
  </div>
</template>

<template name="new">
  <div class="span3">
    <input type="text" id="new-title" class="input-new" placeholder="title" />
  </div>
  <div class="span3">
    <input type="text" id="new-username" class="input-new" placeholder="username" />
  </div>
  <div class="span3">
    <input type="password" id="new-password" class="input-new" placeholder="password" />
  </div>
  <div class="span1">
    {{#if newEnabled}}
    <button class="btn btn-primary" id="button-new">Add</button>
    {{else}}
    <button class="btn btn-primary" id="button-new" disabled="true">Add</button>
    {{/if}}
  </div>
</template>

<template name="passwdlist">
{{#each entries}}
  <tr>
    {{> passwdcell passwdcelltitle }}
    {{> passwdcell passwdcellusername }}
    {{> passwdcell passwdcelldecrypt }}
    <td><a class="trash" href="#"><i class="icon-trash"> </i></a></td>
  </tr>
{{/each}}
</template>

<template name="passwdcell">
    <td class="cell">
    {{#if editing}}
      <div class="edit">
        <input class="{{passwordClass}} cell-input" id="cell-input" type="text" value="{{value}}" />
      </div>
    {{else}}
      <div class="display">
        {{#if value}}
        <span class="{{passwordClass}}">{{value}}</span>
        {{/if}}
      </div>
    {{/if}}
    </td>
</template>
